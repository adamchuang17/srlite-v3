# é€™è£¡æˆ‘æœƒå…ˆç”Ÿæˆä¸€å€‹ index.html ç¯„ä¾‹æª”æ¡ˆï¼ŒåŒ…å«å®Œæ•´çš„ SimpleReceiveLite v4 åŠŸèƒ½æ•´åˆ
# ä¾›ç”¨æˆ¶ä¸‹è¼‰å¾Œå¯ç›´æ¥åœ¨æœ¬åœ°æ‰“é–‹æ¸¬è©¦ï¼Œä¸¦ä¸”æ—¥å¾Œå¯ä¸Šå‚³è‡³ GitHub Pagesã€‚

html_code = """
<!DOCTYPE html>
<html lang="zh-Hant">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SimpleReceiveLite v4</title>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        h1 { text-align: center; }
        select, input, button { margin: 5px; padding: 5px; }
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        table, th, td { border: 1px solid #000; text-align: center; }
        th, td { padding: 8px; }
        canvas { border: 1px solid #000; display: block; margin: 10px auto; }
        .btn { padding: 8px 16px; margin: 5px; cursor: pointer; }
        .flex { display: flex; justify-content: center; flex-wrap: wrap; }
    </style>
</head>
<body>
    <h1>ğŸ“¦ SimpleReceiveLite v4</h1>
    <div class="flex">
        <select id="building"></select>
        <select id="floor"></select>
        <select id="unit"></select>
        <input type="text" id="recipient" placeholder="æ”¶ä»¶äºº">
        <select id="carrier"></select>
        <button class="btn" onclick="addRecord()">åŠ å…¥å¾…ç°½æ”¶</button>
        <button class="btn" onclick="downloadPDF()">ä¸‹è¼‰ PDF</button>
    </div>
    <canvas id="signature" width="300" height="150"></canvas>
    <div class="flex">
        <button class="btn" onclick="clearSignature()">æ¸…é™¤ç°½å</button>
        <button class="btn" onclick="saveSignature()">ç°½åå®Œæˆ</button>
    </div>
    <h3>å¾…ç°½æ”¶</h3>
    <table id="pendingTable">
        <thead>
            <tr><th>æµæ°´è™Ÿ</th><th>ä½å€</th><th>æ”¶ä»¶äºº</th><th>è²¨é‹å…¬å¸</th><th>ç°½å</th><th>æ“ä½œ</th></tr>
        </thead>
        <tbody></tbody>
    </table>
    <h3>å·²ç°½æ”¶</h3>
    <table id="signedTable">
        <thead>
            <tr><th>æµæ°´è™Ÿ</th><th>ä½å€</th><th>æ”¶ä»¶äºº</th><th>è²¨é‹å…¬å¸</th><th>ç°½å</th></tr>
        </thead>
        <tbody></tbody>
    </table>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
<script>
let serial = 1;
let signaturePad;
const building = document.getElementById('building');
const floor = document.getElementById('floor');
const unit = document.getElementById('unit');
const carrier = document.getElementById('carrier');
const pendingTable = document.getElementById('pendingTable').querySelector('tbody');
const signedTable = document.getElementById('signedTable').querySelector('tbody');
const canvas = document.getElementById('signature');
const ctx = canvas.getContext('2d');
let drawing = false;

const carriers = ["å¤§æ¦®","æ–°ç«¹","å®…é…é€š","å®…æ€¥ä¾¿","å…¶ä»–"];
const buildings = ["ç”²","ä¹™","ä¸™","ä¸","æˆŠ","å·±"];

// åˆå§‹åŒ–ä¸‹æ‹‰
function initDropdowns(){
    buildings.forEach(b => building.add(new Option(b,b)));
    for(let i=1;i<=14;i++) floor.add(new Option(i+"æ¨“",i));
    for(let i=1;i<=8;i++) unit.add(new Option("ä¹‹"+i,i));
    carriers.forEach(c => carrier.add(new Option(c,c)));
}

// åŠ å…¥å¾…ç°½æ”¶
function addRecord(){
    const addr = building.value + floor.value + "ä¹‹" + unit.value;
    const rec = document.getElementById('recipient').value;
    const car = carrier.value;
    if(!addr || !rec) return alert("è«‹è¼¸å…¥å®Œæ•´è³‡è¨Š");

    let row = pendingTable.insertRow();
    row.insertCell(0).innerText = serial;
    row.insertCell(1).innerText = addr;
    row.insertCell(2).innerText = rec;
    row.insertCell(3).innerText = car;
    row.insertCell(4).innerHTML = "<img src='"+canvas.toDataURL()+"' width='100'>";
    let btnCell = row.insertCell(5);
    let btn = document.createElement("button");
    btn.innerText = "ç°½æ”¶å®Œæˆ";
    btn.onclick = () => signRecord(row);
    btnCell.appendChild(btn);

    serial = serial % 500 + 1;
    clearSignature();
}

// ç°½æ”¶
function signRecord(row){
    signedTable.appendChild(row);
    row.deleteCell(5); // ç§»é™¤æ“ä½œæŒ‰éˆ•
}

// ç°½åæ¿äº‹ä»¶
canvas.addEventListener('mousedown', e => { drawing = true; ctx.beginPath(); ctx.moveTo(e.offsetX,e.offsetY); });
canvas.addEventListener('mousemove', e => { if(drawing){ ctx.lineTo(e.offsetX,e.offsetY); ctx.stroke(); }});
canvas.addEventListener('mouseup', () => drawing=false);

function clearSignature(){
    ctx.clearRect(0,0,canvas.width,canvas.height);
}
function saveSignature(){
    alert("ç°½åå·²ä¿å­˜ï¼Œå¯åŠ å…¥ç´€éŒ„");
}

// ä¸‹è¼‰ PDF
function downloadPDF(){
    const { jsPDF } = window.jspdf;
    html2canvas(document.body).then(canvas => {
        const img = canvas.toDataURL("image/png");
        const pdf = new jsPDF('p','mm','a4');
        let width = pdf.internal.pageSize.getWidth();
        let height = canvas.height * width / canvas.width;
        pdf.addImage(img,'PNG',0,0,width,height);
        pdf.save("signed_records.pdf");
    });
}

initDropdowns();
</script>
</body>
</html>
"""

# å°‡æª”æ¡ˆå¯«å‡ºåˆ°æœ¬åœ°ï¼Œä¾›ç”¨æˆ¶ä¸‹è¼‰
file_path = "/mnt/data/index_final_v4.html"
with open(file_path, "w", encoding="utf-8") as f:
    f.write(html_code)

file_path
