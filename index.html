<!DOCTYPE html>
<html lang="zh-Hant">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>SimpleReceiveLite v4 — 住址名冊＋簽收＋循環流水＋部分條件搜尋</title>
<style>
  :root{--bg:#0f172a;--panel:#0b1220;--card:#111827;--muted:#94a3b8;--text:#e5e7eb;--accent:#22c55e;--danger:#ef4444;--info:#0ea5e9}
  html,body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,"PingFang TC","Microsoft JhengHei",sans-serif}
  .wrap{max-width:1100px;margin:24px auto;padding:16px}
  h1{margin:0 0 8px;font-size:22px}
  .sub{color:var(--muted);font-size:13px;margin-bottom:12px}
  .tabs{display:flex;gap:8px;margin-bottom:12px}
  .tab{padding:8px 12px;border-radius:999px;border:1px solid #334155;background:#0b1220;color:#cbd5e1;cursor:pointer}
  .tab.active{background:var(--accent);color:#052e12;border-color:#16a34a}
  .card{background:var(--card);border-radius:14px;padding:14px;box-shadow:0 10px 30px rgba(0,0,0,.25)}
  label{display:block;font-size:13px;color:var(--muted);margin:6px 0}
  input,select{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #334155;background:#0b1220;color:#e5e7eb}
  .grid{display:grid;grid-template-columns:repeat(3,1fr);gap:10px}
  .grid2{display:grid;grid-template-columns:repeat(2,1fr);gap:10px}
  .row{display:flex;gap:8px;align-items:center;flex-wrap:wrap}
  .btn{padding:8px 12px;border:0;border-radius:10px;background:#334155;color:#fff;cursor:pointer}
  .primary{background:var(--accent);color:#052e12;font-weight:700}
  .danger{background:var(--danger)}
  .info{background:var(--info)}
  table{width:100%;border-collapse:collapse}
  th,td{padding:8px;border-bottom:1px solid #243244;text-align:left;font-size:13px}
  th{color:#cbd5e1}
  .toolbar{display:flex;gap:8px;justify-content:space-between;align-items:center;margin:6px 0 10px;flex-wrap:wrap}
  .pill{font-size:12px;color:#94a3b8}
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.55);display:none;align-items:center;justify-content:center;padding:16px}
  .modal.show{display:flex}
  .box{background:#111827;border-radius:14px;padding:14px;max-width:900px;width:100%}
  canvas{width:100%;height:220px;background:#0b1220;border:1px dashed #334155;border-radius:10px;touch-action:none}
  .muted{color:#94a3b8}
  /* 列印樣式（A4） */
  @media print{
    body{background:#fff;color:#000}
    .tabs,.toolbar,.sub,button,.modal{display:none!important}
    .card{box-shadow:none;border:0;padding:0}
    table{font-size:12px}
    th,td{border:1px solid #999}
    h1{font-size:18px;color:#000;margin:0 0 6px}
  }
</style>
</head>
<body>
<div class="wrap">
  <h1>📦 SimpleReceiveLite v4</h1>
  <div class="sub">新增 → <b>住址三欄連動</b> → 待簽收列表<b>三欄搜尋（可只選一兩欄）</b> → <b>簽收（簽名＋件數）</b> → 已簽收；流水號<b>1–500循環</b>；<b>住址名冊</b>記住收件人與貨運公司；CSV 匯出。</div>

  <div class="tabs">
    <button class="tab active" data-tab="add">➕ 新增</button>
    <button class="tab" data-tab="pending">📥 待簽收</button>
    <button class="tab" data-tab="signed">📤 已簽收</button>
  </div>

  <!-- 新增 -->
  <section id="tab-add" class="card">
    <div class="grid">
      <div><label>棟別</label><select id="bld"></select></div>
      <div><label>樓層</label><select id="floor" disabled></select></div>
      <div><label>戶別</label><select id="unit" disabled></select></div>
    </div>
    <div class="grid2" style="margin-top:10px">
      <div><label>收件人</label>
        <input id="receiver" list="receiverList" placeholder="住戶姓名" />
        <datalist id="receiverList"></datalist>
      </div>
      <div><label>件別</label>
        <select id="category"><option>包裹</option><option>掛號</option></select>
      </div>
      <div><label>貨運公司</label>
        <input id="company" list="companyList" placeholder="大榮 / 新竹 / 宅配通 / 宅急便 / 其他"
